-- MySQL Script generated by MySQL Workbench
-- Thu Apr 26 16:28:17 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema EasyWedding
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema EasyWedding
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `EasyWedding` DEFAULT CHARACTER SET utf8mb4 ;
USE `EasyWedding` ;

-- -----------------------------------------------------
-- Table `EasyWedding`.`T_PLACES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_PLACES` (
  `ID_PLACE` INT NOT NULL AUTO_INCREMENT,
  `PLALABEL` VARCHAR(100) NOT NULL,
  `PLALAT` GEOMETRY NOT NULL,
  `PLALONG` GEOMETRY NOT NULL,
  `PLAADDRESS` VARCHAR(150) NOT NULL,
  `PLAPC` VARCHAR(5) NOT NULL,
  `PLACITY` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_PLACE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_EVENTS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_EVENTS` (
  `ID_EVENT` INT NOT NULL,
  `EVEBEGINNING` DATETIME NOT NULL,
  `EVEEND` DATETIME NOT NULL,
  `EVENBR` INT NOT NULL,
  `T_PLACES_ID_PLACE` INT NOT NULL,
  PRIMARY KEY (`ID_EVENT`),
  INDEX `fk_T_EVENTS_T_PLACES1_idx` (`T_PLACES_ID_PLACE` ASC),
  CONSTRAINT `fk_T_EVENTS_T_PLACES1`
    FOREIGN KEY (`T_PLACES_ID_PLACE`)
    REFERENCES `EasyWedding`.`T_PLACES` (`ID_PLACE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_USERS` (
  `ID_USER` INT NOT NULL AUTO_INCREMENT,
  `USENAME` VARCHAR(60) NOT NULL,
  `USEFIRSTNAME` VARCHAR(60) NOT NULL,
  `USEMAIL` VARCHAR(150) NOT NULL,
  `USEPASSWORD` CHAR(60) NOT NULL,
  `USETOKEN` CHAR(128) NOT NULL,
  `USECONFIRM` INT(1) NOT NULL DEFAULT 0,
  `USEBIRTHDATE` DATE NOT NULL,
  `USEGENDER` INT(1) NOT NULL DEFAULT 0,
  `USEADDRESS` VARCHAR(255) NOT NULL,
  `USEPC` VARCHAR(5) NOT NULL,
  `USECITY` VARCHAR(45) NOT NULL,
  `T_EVENTS_ID_EVENT` INT NOT NULL,
  PRIMARY KEY (`ID_USER`),
  INDEX `fk_T_USERS_T_EVENTS1_idx` (`T_EVENTS_ID_EVENT` ASC),
  CONSTRAINT `fk_T_USERS_T_EVENTS1`
    FOREIGN KEY (`T_EVENTS_ID_EVENT`)
    REFERENCES `EasyWedding`.`T_EVENTS` (`ID_EVENT`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_PRESTATIONTYPES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_PRESTATIONTYPES` (
  `ID_PRESTATIONTYPE` INT NOT NULL AUTO_INCREMENT,
  `PRETYPLABEL` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID_PRESTATIONTYPE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_PRESTATIONS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_PRESTATIONS` (
  `ID_PRESTATION` INT NOT NULL AUTO_INCREMENT,
  `PRELABEL` VARCHAR(45) NOT NULL,
  `PREPRICE` FLOAT NOT NULL,
  `T_PRESTATIONTYPES_ID_PRESTATIONTYPE` INT NOT NULL,
  `T_EVENTS_ID_EVENT` INT NOT NULL,
  PRIMARY KEY (`ID_PRESTATION`, `T_EVENTS_ID_EVENT`),
  INDEX `fk_T_PRESTATIONS_T_PRESTATIONTYPES1_idx` (`T_PRESTATIONTYPES_ID_PRESTATIONTYPE` ASC),
  INDEX `fk_T_PRESTATIONS_T_EVENTS1_idx` (`T_EVENTS_ID_EVENT` ASC),
  CONSTRAINT `fk_T_PRESTATIONS_T_PRESTATIONTYPES1`
    FOREIGN KEY (`T_PRESTATIONTYPES_ID_PRESTATIONTYPE`)
    REFERENCES `EasyWedding`.`T_PRESTATIONTYPES` (`ID_PRESTATIONTYPE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_PRESTATIONS_T_EVENTS1`
    FOREIGN KEY (`T_EVENTS_ID_EVENT`)
    REFERENCES `EasyWedding`.`T_EVENTS` (`ID_EVENT`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_ADMIN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_ADMIN` (
  `ID_ADMIN` INT NOT NULL AUTO_INCREMENT,
  `ADMNAME` VARCHAR(45) NOT NULL,
  `ADMFIRSTNAME` VARCHAR(45) NOT NULL,
  `ADMMAIL` VARCHAR(150) NOT NULL,
  `ADMPASSWORD` CHAR(60) NOT NULL,
  PRIMARY KEY (`ID_ADMIN`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_RECIPIENTS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_RECIPIENTS` (
  `ID_RECIPIENT` INT NOT NULL AUTO_INCREMENT,
  `RECSOCIALREASON` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_RECIPIENT`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_EVENTS_has_T_ADMIN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_EVENTS_has_T_ADMIN` (
  `T_EVENTS_ID_EVENT` INT NOT NULL,
  `T_ADMIN_ID_ADMIN` INT NOT NULL,
  PRIMARY KEY (`T_EVENTS_ID_EVENT`, `T_ADMIN_ID_ADMIN`),
  INDEX `fk_T_EVENTS_has_T_ADMIN_T_ADMIN1_idx` (`T_ADMIN_ID_ADMIN` ASC),
  INDEX `fk_T_EVENTS_has_T_ADMIN_T_EVENTS1_idx` (`T_EVENTS_ID_EVENT` ASC),
  CONSTRAINT `fk_T_EVENTS_has_T_ADMIN_T_EVENTS1`
    FOREIGN KEY (`T_EVENTS_ID_EVENT`)
    REFERENCES `EasyWedding`.`T_EVENTS` (`ID_EVENT`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_EVENTS_has_T_ADMIN_T_ADMIN1`
    FOREIGN KEY (`T_ADMIN_ID_ADMIN`)
    REFERENCES `EasyWedding`.`T_ADMIN` (`ID_ADMIN`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EasyWedding`.`T_RECIPIENTS_has_T_PRESTATIONS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EasyWedding`.`T_RECIPIENTS_has_T_PRESTATIONS` (
  `T_RECIPIENTS_ID_RECIPIENT` INT NOT NULL,
  `T_PRESTATIONS_ID_PRESTATION` INT NOT NULL,
  PRIMARY KEY (`T_RECIPIENTS_ID_RECIPIENT`, `T_PRESTATIONS_ID_PRESTATION`),
  INDEX `fk_T_RECIPIENTS_has_T_PRESTATIONS_T_PRESTATIONS1_idx` (`T_PRESTATIONS_ID_PRESTATION` ASC),
  INDEX `fk_T_RECIPIENTS_has_T_PRESTATIONS_T_RECIPIENTS1_idx` (`T_RECIPIENTS_ID_RECIPIENT` ASC),
  CONSTRAINT `fk_T_RECIPIENTS_has_T_PRESTATIONS_T_RECIPIENTS1`
    FOREIGN KEY (`T_RECIPIENTS_ID_RECIPIENT`)
    REFERENCES `EasyWedding`.`T_RECIPIENTS` (`ID_RECIPIENT`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_RECIPIENTS_has_T_PRESTATIONS_T_PRESTATIONS1`
    FOREIGN KEY (`T_PRESTATIONS_ID_PRESTATION`)
    REFERENCES `EasyWedding`.`T_PRESTATIONS` (`ID_PRESTATION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
